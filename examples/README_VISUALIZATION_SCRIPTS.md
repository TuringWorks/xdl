# XDL Python Visualization Scripts

## Overview

This directory contains Python visualization scripts that demonstrate XDL's DataFrame and data analysis capabilities. All scripts have been modified to integrate with XDL by running XDL demo scripts to generate data before visualization.

## Scripts

### 1. `visualize_comprehensive.py`
**Purpose**: Comprehensive visualization of XDL DataFrame demos including time series, ML classification, and 3D spatial data.

**Features**:
- Runs XDL DataFrame demo scripts automatically
- Generates 9 different visualization plots
- Shows time series analysis with moving averages
- Displays ML classification results with confusion matrices
- Creates 3D spatial visualizations

**XDL Integration**:
- Executes `ml_classification_demo.xdl` for classification data
- Executes `3d_visualization_demo.xdl` for spatial data
- Reads generated CSV files from xdl-dataframe/ directory

**Dependencies**: matplotlib, numpy

**Usage**:
```bash
cd /path/to/xdl
python3 examples/visualize_comprehensive.py
```

### 2. `plot_dataframe_simple.py`
**Purpose**: Simple DataFrame visualization without pandas dependency.

**Features**:
- 6 different plot types for employee data analysis
- Age vs Salary scatter plot by department
- Average salary bar charts
- Employee distribution pie chart
- Experience vs Salary with trend line
- Age distribution histogram
- Salary box plots by department

**XDL Integration**:
- Executes `simple_data_analysis.xdl` to generate employee data
- Reads `sample_data.csv` from xdl-dataframe/ directory
- Falls back to hardcoded data if CSV not available

**Dependencies**: matplotlib, numpy

**Usage**:
```bash
cd /path/to/xdl
python3 examples/plot_dataframe_simple.py
```

### 3. `visualize_dataframe.py`
**Purpose**: DataFrame visualization using pandas for advanced analysis.

**Features**:
- Same visualizations as `plot_dataframe_simple.py` but using pandas
- Cleaner data manipulation with pandas DataFrames
- Statistical summaries and correlations

**XDL Integration**:
- Executes `simple_data_analysis.xdl` to generate employee data
- Reads `sample_data.csv` from xdl-dataframe/ directory
- Falls back to hardcoded data if CSV not available

**Dependencies**: pandas, matplotlib, numpy

**Usage**:
```bash
cd /path/to/xdl
python3 examples/visualize_dataframe.py
```

## How XDL Integration Works

All scripts follow this pattern:

1. **Find XDL Executable**:
   - Look for `target/release/xdl` first (optimized build)
   - Fall back to `target/debug/xdl` (development build)
   - Exit with error if not found

2. **Run XDL Demo Scripts**:
   - Execute appropriate XDL demo script using subprocess
   - Capture output and handle timeouts gracefully
   - Log success/failure messages

3. **Load Generated Data**:
   - Read CSV files generated by XDL demos
   - Fall back to hardcoded data if CSV not available
   - Handle missing files gracefully

4. **Create Visualizations**:
   - Use matplotlib to create publication-quality plots
   - Save output images
   - Display statistical summaries

## XDL Demo Scripts Used

The Python scripts execute these XDL demos:

- **`xdl-dataframe/examples/simple_data_analysis.xdl`**: Generates employee data CSV
- **`xdl-dataframe/examples/ml_classification_demo.xdl`**: Generates ML classification data
- **`xdl-dataframe/examples/3d_visualization_demo.xdl`**: Generates 3D spatial data
- **`xdl-dataframe/examples/charting_demo.xdl`**: Generates time series data

## Current Status

**Implementation**: ✅ Complete

All three Python scripts have been successfully modified to:
- Locate and execute XDL binaries
- Run XDL demo scripts automatically
- Handle errors gracefully with fallback data
- Provide clear status messages to users

**XDL DataFrame Integration**: ⚠️ In Progress

The XDL DataFrame module is still under development. The demo scripts use advanced features like:
- Object-oriented syntax (`df->Method()`)
- DataFrame functions (`XDLDATAFRAME_READ_CSV`)
- Method chaining

These features are not yet fully implemented in the XDL parser. Once complete, the Python scripts will work seamlessly with XDL-generated data.

**Current Behavior**:
- Scripts attempt to run XDL demos
- If XDL demos fail (due to unimplemented features), scripts fall back to hardcoded data
- Visualizations still work correctly with fallback data

## Prerequisites

### Building XDL

Before running these scripts, build XDL:

```bash
cd /path/to/xdl
cargo build --release
```

Or for development:

```bash
cargo build
```

### Python Dependencies

Install required Python packages:

```bash
# For visualize_comprehensive.py and plot_dataframe_simple.py
pip install matplotlib numpy

# For visualize_dataframe.py (additional)
pip install pandas
```

## Output

Each script generates:

1. **Console Output**:
   - XDL execution status
   - Data loading confirmation
   - Statistical summaries

2. **PNG Images**:
   - `comprehensive_visualization.png` (visualize_comprehensive.py)
   - `dataframe_visualization.png` (plot_dataframe_simple.py and visualize_dataframe.py)

3. **Display**:
   - Interactive matplotlib windows (if GUI available)

## Troubleshooting

### Error: "XDL executable not found"
**Solution**: Run `cargo build --release` or `cargo build` first

### Error: "ModuleNotFoundError: No module named 'matplotlib'"
**Solution**: Install Python dependencies with `pip install matplotlib numpy pandas`

### Warning: "Demo script not found"
**Solution**: Ensure you're running from the XDL root directory, not from examples/

### Warning: "CSV file not found"
**Solution**: This is expected if DataFrame features aren't fully implemented. Scripts will use fallback data.

### XDL Demo Fails
**Solution**: This is expected currently. The scripts gracefully fall back to hardcoded data and continue.

## Future Enhancements

Once XDL DataFrame is fully implemented:

1. **Real-time Data**: Scripts will use actual XDL-generated data
2. **No Fallbacks**: Remove hardcoded fallback data
3. **More Demos**: Add integration with additional XDL modules (ML, database, etc.)
4. **Interactive Mode**: Add CLI arguments for customization

## Architecture

```
xdl/
├── examples/
│   ├── visualize_comprehensive.py    # Main visualization script
│   ├── plot_dataframe_simple.py      # Simple visualization (no pandas)
│   ├── visualize_dataframe.py        # Pandas-based visualization
│   └── README_VISUALIZATION_SCRIPTS.md  # This file
├── xdl-dataframe/
│   ├── examples/
│   │   ├── simple_data_analysis.xdl
│   │   ├── ml_classification_demo.xdl
│   │   ├── 3d_visualization_demo.xdl
│   │   └── charting_demo.xdl
│   ├── *.csv  # Generated by XDL demos
│   └── ...
└── target/
    ├── release/
    │   └── xdl  # Optimized XDL executable
    └── debug/
        └── xdl  # Development XDL executable
```

## Contributing

When modifying these scripts:

1. Maintain fallback data for graceful degradation
2. Add clear error messages for debugging
3. Use Path objects for cross-platform compatibility
4. Handle subprocess timeouts appropriately
5. Update this README with any changes

## License

Same as XDL project license.
